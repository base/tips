services:
  ingress-rpc:
    build:
      context: .
      dockerfile: Dockerfile
    command:
      - "/app/tips-ingress-rpc"
    container_name: tips-ingress-rpc
    ports:
      - "8080:8080"
    env_file:
      - .env.docker
    volumes:
      - ./docker/ingress-kafka-properties:/app/docker/ingress-kafka-properties:ro
    restart: unless-stopped

  audit:
    build:
      context: .
      dockerfile: Dockerfile
    command:
      - "/app/tips-audit"
    container_name: tips-audit
    env_file:
      - .env.docker
    volumes:
      - ./docker/audit-kafka-properties:/app/docker/audit-kafka-properties:ro
    restart: unless-stopped

  maintenance:
    build:
      context: .
      dockerfile: Dockerfile
    command:
      - "/app/tips-maintenance"
    container_name: tips-maintenance
    env_file:
      - .env.docker
    volumes:
      - ./docker/maintenance-kafka-properties:/app/docker/maintenance-kafka-properties:ro
    restart: unless-stopped

  ui:
    build:
      context: .
      dockerfile: ui/Dockerfile
    ports:
      - "3000:3000"
    container_name: tips-ui
    env_file:
      - .env.docker
    restart: unless-stopped

  ingress-writer:
    build:
      context: .
      dockerfile: Dockerfile
    command:
      - "/app/tips-ingress-writer"
    container_name: tips-ingress-writer
    env_file:
      - .env.docker
    volumes:
      - ./docker/ingress-writer-kafka-properties:/app/docker/ingress-writer-kafka-properties:ro
    restart: unless-stopped