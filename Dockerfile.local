ARG BASE_IMAGE=ghcr.io/flashbots/tips:master
FROM ${BASE_IMAGE}

ENV TIPS_INGRESS_ADDRESS=0.0.0.0
ENV TIPS_INGRESS_PORT=8080
ENV TIPS_INGRESS_RPC_MEMPOOL=http://localhost:2222
ENV TIPS_INGRESS_TX_SUBMISSION_METHOD=mempool
ENV TIPS_INGRESS_KAFKA_INGRESS_PROPERTIES_FILE=/app/docker/ingress-bundles-kafka-properties
ENV TIPS_INGRESS_KAFKA_INGRESS_TOPIC=tips-ingress
ENV TIPS_INGRESS_KAFKA_AUDIT_PROPERTIES_FILE=/app/docker/ingress-audit-kafka-properties
ENV TIPS_INGRESS_KAFKA_AUDIT_TOPIC=tips-audit
ENV TIPS_INGRESS_KAFKA_USER_OPERATION_CONSUMER_PROPERTIES_FILE=/app/docker/ingress-user-operation-consumer-kafka-properties
ENV TIPS_INGRESS_LOG_LEVEL=info
ENV TIPS_INGRESS_LOG_FORMAT=pretty
ENV TIPS_INGRESS_SEND_TRANSACTION_DEFAULT_LIFETIME_SECONDS=10800
ENV TIPS_INGRESS_RPC_SIMULATION=http://localhost:8549
ENV TIPS_INGRESS_METRICS_ADDR=0.0.0.0:9002
ENV TIPS_INGRESS_HEALTH_CHECK_ADDR=0.0.0.0:8081
ENV TIPS_INGRESS_BLOCK_TIME_MILLISECONDS=2000
ENV TIPS_INGRESS_METER_BUNDLE_TIMEOUT_MS=2000
ENV TIPS_INGRESS_MAX_BUFFERED_METER_BUNDLE_RESPONSES=100
ENV TIPS_INGRESS_BUILDER_RPCS=http://localhost:2222,http://localhost:2222,http://localhost:2222
ENV TIPS_INGRESS_BACKRUN_ENABLED=true

ENV TIPS_AUDIT_KAFKA_PROPERTIES_FILE=/app/docker/audit-kafka-properties
ENV TIPS_AUDIT_KAFKA_TOPIC=tips-audit
ENV TIPS_AUDIT_LOG_LEVEL=info
ENV TIPS_AUDIT_LOG_FORMAT=pretty
ENV TIPS_AUDIT_S3_BUCKET=tips
ENV TIPS_AUDIT_S3_CONFIG_TYPE=manual
ENV TIPS_AUDIT_S3_ENDPOINT=http://localhost:7000
ENV TIPS_AUDIT_S3_REGION=us-east-1
ENV TIPS_AUDIT_S3_ACCESS_KEY_ID=minioadmin
ENV TIPS_AUDIT_S3_SECRET_ACCESS_KEY=minioadmin

ENV NEXT_PUBLIC_BLOCK_EXPLORER_URL=https://base.blockscout.com
ENV TIPS_UI_RPC_URL=http://localhost:8549
ENV TIPS_UI_AWS_REGION=us-east-1
ENV TIPS_UI_S3_BUCKET_NAME=tips
ENV TIPS_UI_S3_CONFIG_TYPE=manual
ENV TIPS_UI_S3_ENDPOINT=http://localhost:7000
ENV TIPS_UI_S3_ACCESS_KEY_ID=minioadmin
ENV TIPS_UI_S3_SECRET_ACCESS_KEY=minioadmin
